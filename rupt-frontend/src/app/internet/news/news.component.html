
<div class="news" *ngIf='post'>
  
    <div id="modalDenuncia" class="modal modal2 modal4"
        materialize="modal" [materializeParams]="[{dismissible: false}]"
        [materializeActions]="modalDenuncia">
        <modal-generico [action]="'denuncia'" [idObj]="post?.id" (closeModalGenerico)="closeModalDenuncia($event)"></modal-generico>
    </div>

    <div id="modalLoading" class="loading-modal modal modal2 modal4"
        materialize="modal" [materializeParams]="[{dismissible: false}]"
        [materializeActions]="modalLoading">
        <modal-generico [action]="'loading'" [obj]="'Carregando'" (closeModalGenerico)="closeModalLoading($event)"></modal-generico>
    </div>

    <div id="modalCompartilhar" class="modal modal2 modal4"
        materialize="modal" [materializeParams]="[{dismissible: true}]"
        [materializeActions]="modalCompartilhar">
        <modal-compartilhar [interacoes]='interacoes' [interacoesLeitor]='interacoesLeitor' (compartilhar)="compartilhar($event)"></modal-compartilhar>
    </div>

    <div id="modalExcluir" class="modal modal2 modal4" materialize="modal" [materializeParams]="[{dismissible: false}]"
        [materializeActions]="modalExcluir">
        <modal-excluir (closeModalExcluir)="closeModalExcluir($event)" (excluiuCompartilhamento)='excluiuCompartilhamento($event)'
            [id]='post.id' [leitor]='leitor' [op]='2' [interacao]='interacao'>
        </modal-excluir>
    </div>

    <div id="ModalLogin" class="modal modal2"
        materialize="modal" [materializeParams]="[{dismissible: false}]"
        [materializeActions]="modalLogin">
        <modal-login (closeModalLogin)="closeModalLogin($event)" (openEsqueciSenha)="openModalEsqueciSenha($event)"></modal-login>
    </div>
    <div id="ModalEsqueciSenha" class="modal modal2"
        materialize="modal" [materializeParams]="[{dismissible: false}]"
        [materializeActions]="modalEsqueciSenha">
        <esqueci-senha (closeModalEsqueciSenha)="closeModalEsqueciSenha($event)"></esqueci-senha>
    </div>

  <div class="area-top">
    
    <div class="tag-menu" *ngIf="!rascunho">
      
        <div class="tag red"> {{ post.categorias_post[post.categorias_post.length-1].categoria.categoria }} </div> 
      
    </div>  

    <div class="title"> {{ post.titulo }}</div>
    <div class="editado-text" *ngIf="edited"> 
        Editado
    </div>

  </div>

  <div class="container">

    <div class="area">

      <font *ngIf="!rascunho">Por</font>
      <a *ngIf="!rascunho" routerLink='/perfil/{{ post.autor.nick }}'>
          <font class="name"> {{ post?.autor?.nick }} </font> 
      </a>
      
      <img *ngIf="!rascunho" src="../../../assets/img/marcador.png" class="img"> 
      <b *ngIf="!rascunho" > {{ calcHour( post.publishedAt ) }} </b>

        <div class="social">

            <p> {{ interacoesTotal[0] }} </p>
            <img src="../../../assets/img/rupt-ico.png" class="img">

            <p> {{ interacoesTotal[1] }} </p>
            <img src="../../../assets/img/share2.png" class="img">

            <img  title='Denunciar' *ngIf='leitor.id != post.autor.id' src="../../../assets/img/report.png" class="img report" (click)="openModalDenuncia()">
        </div>

    </div>

    <div class="frame">

        <img src="{{ url + 'posts/' + post.src_imagem }}" class="img" *ngIf="post.src_imagem && !rascunho">

        <div class="info" [innerHTML]="post.conteudo"></div>

        <div class="reactions" *ngIf="leitorLogado">
            <div *ngFor='let i of interacoes' class="area2">
                <div *ngIf='i.categoria == 1 && i.compartilhar == false' (click)='interagePost(i)'>
                    <img src="../../../assets/{{ i.src_icone }}" class="img"
                        [ngClass]="{'pb': interagiu && !checkInteracao(i.id)}"
                    >

                    <p>{{ i.nome }}</p>
                    <span class="count">{{ i.count }}</span>

                </div>
            </div>

            <div class="area2">
                <div (click)='openModalCompartilhar()'>
                    <img src="../../../assets/img/share.png" class="img">

                    <p>Compartilhar</p>
                    <span class="count">{{ interacoesTotal[1] }}</span>
                </div>
            </div>
        </div> 
        <div class="reactions" *ngIf="!leitorLogado">
            <div *ngFor='let i of interacoes' class="area2">
                <div *ngIf='i.categoria == 1 && i.compartilhar == false'>
                    <img src="../../../assets/{{ i.src_icone }}" class="img disabled">
                    <p>{{ i.nome }}</p>
                    <span class="count">{{ i.count }}</span>
                </div>
            </div>

            <div class="area2">
                <div (click)='openModalCompartilhar()'>
                    <img src="../../../assets/img/share.png" class="img">

                    <p>Compartilhar</p>
                    <span class="count">{{ interacoesTotal[1] }}</span>
                </div>
            </div>
        </div> 

        <div class="comentarios">

            <p> <b>{{ comentarios?.length}}</b> comentários </p>

            <div class="subtitle">Os comentários dessa sessão são de responsabilidade exclusiva de seus autores e não representam a opnião deste site. Se achar algo que viole os <b>Termos de uso</b>, denuncie. Leia as <a routerLink="../../faq">perguntas mais frequentes</a> para saber o que é impróprio ou ilegal.</div>

            <div class="profile" *ngIf="leitorLogado">
                <div class="img-area">  
                    <img src="{{  url + 'profile/' + leitor?.src_foto }}" class="img"> 
                </div>
                <form [formGroup]="form" (ngSubmit)="onSubmit()">
                    <input type="text" class="input" maxlength="140" name="comentario" formControlName="comentario" placeholder="Escreva um comentário..." >
                    <button type="submit" class="button" [disabled]="form.value.comentario === ''" id="submit-contato"> Enviar </button>
                </form>
            </div>

            <div class="separate" *ngIf='comentarios && comentarios.length > 0' > recentes </div>

            <div class="profile" *ngFor="let c of comentarios">
                
                <a routerLink='/perfil/{{ c?.comentario?.leitor?.nick }}'>
                    <div class="img-area">  
                        <img src="{{url + 'profile/' + c?.comentario?.leitor?.src_foto}}" class="img"> 
                    </div>
                </a>

                <div class="user">
                    <a routerLink='/perfil/{{ c?.comentario?.leitor?.nick }}'>
                        <div class="title"> {{ c.comentario.leitor.nick ? c.comentario.leitor.nick : c.comentario.leitor.nome }} </div>
                    </a>

                    <div class="time"> {{ calcHour( c.comentario.created_at ) }}</div>

                    {{c.comentario.comentario}}

                    <div class="reaction">

                        <div *ngFor='let i of interacoes' class="area2">
                            <div *ngIf='i.categoria == 2' (click)='interagePost(i)'>

                                <img src="../../../assets/{{ i.src_icone}}" class="img2">
                                <div class="number">2</div>

                            </div>
                        </div>

                    </div>

                </div>

            </div>
        </div>

    </div>

  </div>

  <div class="top-view" *ngIf="!rascunho">

    <p>
      <font style="color:#f97000">+</font> Lidas </p>

    <div class="info">

      <img src="" class="img">

      <div class="label"></div>

    </div>
  </div>

  <div class="top-view" *ngIf="!rascunho">
      
          <p> Propagandas </p>
      
          <div class="info">
      
            <img src="../../../assets/img/propaganda6.png" class="img">
      
          </div>
      
          <div class="info">
      
            <img src="../../../assets/img/propaganda5.png" class="img">
      
          </div>
      
      
          <div class="info">
      
            <img src="../../../assets/img/propaganda7.png" class="img">
      
          </div>
      
          <div class="info">
      
            <img src="../../../assets/img/propaganda8.png" class="img">
      
          </div>
      
          <div class="info">
      
            <img src="../../../assets/img/propaganda9.png" class="img">
      
          </div>
      
        </div>
</div>



